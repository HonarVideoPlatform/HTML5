<!DOCTYPE HTML>
<html>
<head>
<title>Google analytics example html5 / kdp</title>

<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.4.2/jquery.js"></script>
<script src="http://cdn.kaltura.org/apis/seo/flashembed.js"></script>
<script type="text/javascript" src="../../../../mwEmbedLoader.php"></script>
<script type="text/javascript">
	mw.setConfig( 'EmbedPlayer.EnableIframeApi', true );
</script>
<script type="text/javascript" src="kGoogleAnalytics.js?7"></script>
<script type="text/javascript">

  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-2078931-10']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();

</script>
<script type="text/javascript">
	// once the player can accept events: 
	function jsCallbackReady( playerId ){
		new kGoogleAnalytics({
			// List of kaltura events to track 
			// Full list of notifications available here: 
			// http://www.kaltura.org/demos/kdp3/docs.html#notifications
			// For default list of events do not set this property 
			'eventTrackList' : null,

			// The player object to add bindings too:
			'playerElement' : $('#' + playerId ).get(0), 
			
			// pageTracker object ( if set to null async tracking is used via _gaq.push calls )
			'googlePageTracker': null,
			
			// An optional event callback to be used to monitor what events are being sent to google via _trackEvent calls
			'trackEventMonitor' : function( category, action, opt_label, opt_value ){
				$('#eventRowDesc').after(
					$('<tr />' ).append(
						$('<td />').text( category ),
						$('<td />').text( action ),
						$('<td />').text( '' + opt_label ),
						$('<td />').text( '' + opt_value )
					)
				)
			}
		});
	};
</script>
<script type="text/javascript">
		flashembed("player_container",
				{	// attributes and params:
					id :				"kaltura_player",
					src : 				"http://www.kaltura.com/index.php/kwidget/wid/_243342/uiconf_id/" +
											"48501/entry_id/0_swup5zao",
					height :			330,
					width :				400,
					bgcolor :			"#000000",
					allowNetworking : 	"all",
					version :			[10,0],
					expressInstall :	"http://cdn.kaltura.org/apis/seo/expressinstall.swf"
				},
				{	// flashvars:
					// The following enables KDP's JavaScript API (the "external interface" is
					// disabled by default):
					externalInterfaceDisabled : "false"
					// "false" must be double-quoted, all other values don't have to be
				}
		);
</script>
</head>
<body>
<h2> Google analytics for kdp flash player and html5 player </h2>
<a href="?forceMobileHTML5"> Force Mobile Safari</a> for testing with desktop chrome and safari.
<br />
<div style="position:absolute;top:90px;left:450px;width:500px;height:300px;" >
<i>Google Analytics events: </i><br />
<table border="1" width="500">
<tr id="eventRowDesc">
	<td>Category</td>
	<td>action</td>
	<td>opt_label</td>
	<td>opt_value</td>
</tr>
</table>
</div>

<div id="player_container" style="width:330px;height400px" ></div>

</body>
</html>
